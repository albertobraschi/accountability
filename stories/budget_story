  #Think of better phrase for 'total budget'
  Story: "Budgets"
   
    As an admin
    I want to set budgets on my outgoing categories
    So I can know when my spending exceeds its limits

    Scenario: A single category is created and has no spending against it
      Given a category 'CAR'
        And there are no transactions against the category
        And reference date is '2006-06-30'
      When the budget of 'CAR' is set to 1000.00 'annually' starting on '2005-07-01'
        # reference date is equiv of 'todays date' - a date to query in relation to
      Then the remaining budget of 'CAR' is 1000.00
        And the total budget of 'CAR' is 1000.00
        And the quaterly budget of 'CAR' is 250.00
        And the monthly budget of 'CAR' is  83.33
        And the weekly budget of 'CAR' is  19.23
        And exceeded budget? is false
        #  And spending rate is ...
   
    Scenario: A single category is over  budget
      Given a category 'CAR'
      When the budget of 'CAR' is set to 1000.00 'annually' starting on '2005-07-01'
        And 1000.01 is spent against category  on '2006-06-30'
      # reference date is equiv of 'todays date' - a date to query in relation to
        And reference date is '2006-06-30'
      Then the remaining budget is -0.01
        And exceeded budget? is true
      #  And spending rate is ...
    

    Scenario: A category has subcategories and reflects their budgets
      Given a category 'LEISURE'
        And a subcategory of 'LEISURE' called 'TRAVEL'
        And a subcategory of 'LEISURE' called 'EATING OUT'
        And a subcategory of 'TRAVEL' called 'ACCOMODATION'
      When the budget of 'LEISURE' is set to 200.00 'quaterly' starting on '2005-07-01'
        And the budget of 'TRAVEL' is set to 500.00 'quaterly' starting on '2005-07-01'
        And the budget of 'ACCOMODATION' is set to 1500.00 'quaterly' starting on '2005-07-01'
        And the budget of 'EATING OUT' is set to 100.00 'weekly' starting on '2005-07-01'
      Then the total budget of 'LEISURE' is 3500
        And the annual budget of 'LEISURE' is 14000
        And the quaterly budget of 'LEISURE' is 3500.00
        And the monthly budget of 'LEISURE' is 1166.67
        And the weekly budget of 'LEISURE' is 269.23
        And the total budget of 'TRAVEL' is 2000
        And the annual budget of 'TRAVEL' is 8000
        And the quaterly budget of 'TRAVEL' is 2000
        And the monthly budget of 'TRAVEL' is 666.67
        And the weekly budget of 'TRAVEL' is 153.85
        And the total budget of 'ACCOMODATION' is 1500
        And the annual budget of 'ACCOMODATION' is 6000
        And the quaterly budget of 'ACCOMODATION' is 1500
        And the weekly budget of 'ACOMODATION' is 115.39
        And the total budget of 'EATING OUT' is 100
        And the annual budget of 'EATING OUT' is 5200
        And the quaterly budget of 'EATING OUT' is 1300
        And the monthly budget of 'EATING OUT' is 433.33
        And the weekly budget of 'EATING OUT' is 100

#    Scenario: A category has subcategories and reflects their over budget    
#      Given a category 'LEISURE'
#        And a subcategory of 'LEISURE' called 'TRAVEL'
#        And a subcategory of 'LEISURE' called 'EATING OUT'
#        And a subcategory of 'TRAVEL' called 'ACCOMODATION'
#        And the budget of 'LEISURE' is set to 200.00 'quaterly' starting on '2005-07-01'
#        And the budget of 'TRAVEL' is set to 500.00 'quaterly' starting on '2005-07-01'
#        And the budget of 'ACCOMODATION' is set to 1500.00 'quaterly' starting on '2005-07-01'
#        And the budget of 'EATING OUT' is set to 100.00 'weekly' starting on '2005-07-01'
#      When 1501.00 is spent against category 'ACCOMODATION' on '2005-07-10'
#      Then #??? WHAT DO WE WANT TO SEE IN LEISURE and TRAVEL objects given the over all category isn't violated, but the 
#      #acomodation one is?
#      When 3501.00 is spent against category 'EATING OUT' on '2005-07-10'
#      Then #??? WHAT DO WE WANT TO SEE IN LEISURE and TRAVEL objects given that accomodation alone violates both these cat     #egories
